{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thang\\\\Code_WDP301\\\\Learning-Management-System\\\\frontend\\\\src\\\\components\\\\Student\\\\QuizList.jsx\",\n  _s = $RefreshSig$();\n// src/components/QuizList.jsx\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { motion } from \"framer-motion\";\nimport { FiArrowLeft, FiClock, FiCheckCircle, FiAlertTriangle, FiEdit3, FiSend } from \"react-icons/fi\";\nimport { Container, Card, Button, Spinner, Form, Row, Col, Badge, Alert, ProgressBar } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function QuizList() {\n  _s();\n  var _submission$grade2;\n  const navigate = useNavigate();\n  const {\n    assignmentId\n  } = useParams(); // Route: /student/quiz/:assignmentId\n\n  // 1. State\n  const [assignment, setAssignment] = useState(null);\n  const [submission, setSubmission] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [answers, setAnswers] = useState({}); // { questionId: selectedOption }\n  const [essayContent, setEssayContent] = useState(\"\");\n  const [canEdit, setCanEdit] = useState(false); // còn hạn nộp\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Lấy studentId từ localStorage hoặc mặc định\n  const DEFAULT_STUDENT_ID = \"60a000000000000000000002\";\n  const [studentId, setStudentId] = useState(DEFAULT_STUDENT_ID);\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(\"user\");\n      if (stored) {\n        const u = JSON.parse(stored);\n        if (u && u._id) setStudentId(u._id);\n      }\n    } catch (e) {\n      console.warn(\"localStorage user parse error:\", e);\n    }\n  }, []);\n\n  // Fetch assignment detail\n  const fetchAssignment = useCallback(async () => {\n    try {\n      const resp = await axios.get(`/api/student/assignments/${assignmentId}`);\n      if (resp.data.success) {\n        setAssignment(resp.data.data);\n      }\n    } catch (err) {\n      console.error(\"Error fetching assignment:\", err);\n    }\n  }, [assignmentId]);\n\n  // Fetch submission (if có) for this student\n  const fetchSubmission = useCallback(async () => {\n    try {\n      const resp = await axios.get(`/api/student/submissions/assignment/${assignmentId}`);\n      if (resp.data.success) {\n        // Lọc ra submission đúng studentId\n        const allSubs = resp.data.data;\n        const mySub = allSubs.find(s => s.studentId.toString() === studentId);\n        if (mySub) {\n          setSubmission(mySub);\n          setHasSubmitted(true);\n          // Nếu quiz:\n          if ((assignment === null || assignment === void 0 ? void 0 : assignment.type) === \"quiz\" && mySub.answers) {\n            const ansMap = {};\n            mySub.answers.forEach(ans => {\n              ansMap[ans.questionId] = ans.selectedOption;\n            });\n            setAnswers(ansMap);\n          }\n          // Nếu essay:\n          if ((assignment === null || assignment === void 0 ? void 0 : assignment.type) === \"essay\" && mySub.content) {\n            setEssayContent(mySub.content);\n          }\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching submission:\", err);\n    }\n  }, [assignmentId, studentId, assignment]);\n\n  // Kiểm tra hạn nộp\n  const checkCanEdit = useCallback(() => {\n    if (!assignment) return;\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    // Nếu chưa quá hạn -> có thể nộp hoặc resubmit\n    setCanEdit(now <= due);\n  }, [assignment]);\n\n  // Kết hợp fetch và kiểm tra\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      await fetchAssignment();\n      setIsLoading(false);\n    }\n    loadData();\n  }, [fetchAssignment]);\n  useEffect(() => {\n    if (assignment) {\n      checkCanEdit();\n      fetchSubmission();\n    }\n  }, [assignment, fetchSubmission, checkCanEdit]);\n\n  // Handle chọn đáp án quiz\n  const handleOptionChange = (questionId, optionKey) => {\n    if (!canEdit) return;\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: optionKey\n    }));\n  };\n\n  // Handle submit/resubmit\n  const handleSubmit = async () => {\n    if (!assignment) return;\n\n    // Kiểm tra deadline một lần nữa\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    if (now > due) {\n      alert(\"Deadline has passed. Cannot submit.\");\n      return;\n    }\n    setIsSubmitting(true);\n\n    // Chuẩn bị payload\n    let payload = {\n      studentId,\n      assignmentId\n    };\n    if (assignment.type === \"quiz\") {\n      // Chuyển answers thành mảng\n      const ansArr = Object.entries(answers).map(([qId, sel]) => ({\n        questionId: qId,\n        selectedOption: sel\n      }));\n      payload.answers = ansArr;\n    } else {\n      // essay\n      payload.content = essayContent;\n    }\n    try {\n      await axios.post(\"/api/student/submissions/submit\", payload);\n      alert(\"Submission successful!\");\n      // Refresh lại submission\n      fetchSubmission();\n    } catch (err) {\n      console.error(\"Submit error:\", err);\n      alert(\"Failed to submit.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Helper functions\n  const getTimeRemaining = () => {\n    if (!assignment) return null;\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    const diff = due - now;\n    if (diff <= 0) return \"Overdue\";\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    const hours = Math.floor(diff % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));\n    if (days > 0) return `${days} day${days > 1 ? 's' : ''} remaining`;\n    if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} remaining`;\n    return \"Less than 1 hour remaining\";\n  };\n  const getQuizProgress = () => {\n    if (!assignment || assignment.type !== 'quiz') return 0;\n    const totalQuestions = assignment.questions.length;\n    const answeredQuestions = Object.keys(answers).length;\n    return answeredQuestions / totalQuestions * 100;\n  };\n  const getStatusBadge = () => {\n    var _submission$grade;\n    if (hasSubmitted && (submission === null || submission === void 0 ? void 0 : (_submission$grade = submission.grade) === null || _submission$grade === void 0 ? void 0 : _submission$grade.score) != null) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"success\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiCheckCircle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 51\n        }, this), \"Graded\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 14\n      }, this);\n    }\n    if (hasSubmitted) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"info\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiCheckCircle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 48\n        }, this), \"Submitted\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 14\n      }, this);\n    }\n    if (!canEdit) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"danger\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 50\n        }, this), \"Overdue\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Badge, {\n      bg: \"warning\",\n      className: \"ms-2\",\n      children: [/*#__PURE__*/_jsxDEV(FiClock, {\n        className: \"me-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 49\n      }, this), \"In Progress\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 12\n    }, this);\n  };\n  if (isLoading || !assignment) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.5\n        },\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"primary\",\n          size: \"lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-muted\",\n          children: \"Loading assignment...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          x: -20,\n          opacity: 0\n        },\n        animate: {\n          x: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-primary\",\n          className: \"mb-4 d-flex align-items-center\",\n          onClick: () => navigate(-1),\n          children: [/*#__PURE__*/_jsxDEV(FiArrowLeft, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), \" Back to Assignments\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: -20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.4,\n          delay: 0.1\n        },\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-start mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                  className: \"h3 mb-2 text-primary\",\n                  children: [assignment.title, getStatusBadge()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: assignment.type === 'quiz' ? 'primary' : 'secondary',\n                  className: \"mb-2\",\n                  children: assignment.type.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this), (submission === null || submission === void 0 ? void 0 : (_submission$grade2 = submission.grade) === null || _submission$grade2 === void 0 ? void 0 : _submission$grade2.score) != null && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h2 text-success mb-0\",\n                  children: [submission.grade.score, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: \"Your Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center text-muted mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(FiClock, {\n                    className: \"me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Due:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 21\n                  }, this), \" \", new Date(assignment.dueDate).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                className: \"text-md-end\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `fw-bold ${canEdit ? 'text-success' : 'text-danger'}`,\n                  children: getTimeRemaining()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), assignment.type === 'quiz' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-center mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted\",\n                  children: \"Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted\",\n                  children: [Object.keys(answers).length, \"/\", assignment.questions.length, \" questions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n                now: getQuizProgress(),\n                variant: getQuizProgress() === 100 ? 'success' : 'primary',\n                height: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), !canEdit && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          scale: 0.95,\n          opacity: 0\n        },\n        animate: {\n          scale: 1,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.3,\n          delay: 0.2\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Deadline has passed!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), \" You can no longer submit or modify your answers.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.5,\n          delay: 0.3\n        },\n        children: assignment.type === 'quiz' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quiz-questions\",\n          children: assignment.questions.map((q, idx) => /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              y: 20,\n              opacity: 0\n            },\n            animate: {\n              y: 0,\n              opacity: 1\n            },\n            transition: {\n              duration: 0.4,\n              delay: 0.1 * idx\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"mb-4 border-0 shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-start mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"light\",\n                    text: \"dark\",\n                    className: \"me-3 fs-6\",\n                    children: idx + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n                    className: \"h5 mb-0 flex-grow-1\",\n                    children: q.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this), answers[q.questionId] && /*#__PURE__*/_jsxDEV(FiCheckCircle, {\n                    className: \"text-success ms-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"mt-3\",\n                  children: q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(Col, {\n                    md: 6,\n                    className: \"mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(motion.div, {\n                      whileHover: canEdit ? {\n                        scale: 1.02\n                      } : {},\n                      whileTap: canEdit ? {\n                        scale: 0.98\n                      } : {},\n                      children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                        type: \"radio\",\n                        name: `q_${q.questionId}`,\n                        id: `${q.questionId}_${opt.key}`,\n                        className: \"custom-radio\",\n                        disabled: !canEdit,\n                        children: [/*#__PURE__*/_jsxDEV(Form.Check.Input, {\n                          type: \"radio\",\n                          checked: answers[q.questionId] === opt.key,\n                          onChange: () => handleOptionChange(q.questionId, opt.key),\n                          disabled: !canEdit\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 363,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Form.Check.Label, {\n                          className: \"d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"fw-bold me-2\",\n                            children: [opt.key, \".\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 370,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: opt.text\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 371,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 369,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 352,\n                      columnNumber: 29\n                    }, this)\n                  }, opt.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 19\n            }, this)\n          }, q.questionId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                className: \"h5 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(FiEdit3, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this), \"Your Answer\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"textarea\",\n                rows: 8,\n                value: essayContent,\n                onChange: e => setEssayContent(e.target.value),\n                disabled: !canEdit,\n                placeholder: canEdit ? \"Type your answer here...\" : \"\",\n                className: \"border-0 shadow-sm\",\n                style: {\n                  resize: 'vertical',\n                  minHeight: '200px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), canEdit && /*#__PURE__*/_jsxDEV(Form.Text, {\n                className: \"text-muted\",\n                children: [essayContent.length, \" characters\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.4,\n          delay: 0.5\n        },\n        className: \"text-center mt-4\",\n        children: canEdit ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmit,\n          disabled: isSubmitting,\n          size: \"lg\",\n          className: \"px-5 py-3\",\n          variant: hasSubmitted ? \"warning\" : \"success\",\n          children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              size: \"sm\",\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 19\n            }, this), \"Submitting...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(FiSend, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 19\n            }, this), hasSubmitted ? 'Resubmit Assignment' : 'Submit Assignment']\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"secondary\",\n          className: \"d-inline-block\",\n          children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this), \"Submission period has ended\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n}\n_s(QuizList, \"6WY0oQMxK8QezIbENizA7XX1yQw=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = QuizList;\nvar _c;\n$RefreshReg$(_c, \"QuizList\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","axios","motion","FiArrowLeft","FiClock","FiCheckCircle","FiAlertTriangle","FiEdit3","FiSend","Container","Card","Button","Spinner","Form","Row","Col","Badge","Alert","ProgressBar","jsxDEV","_jsxDEV","Fragment","_Fragment","QuizList","_s","_submission$grade2","navigate","assignmentId","assignment","setAssignment","submission","setSubmission","isLoading","setIsLoading","answers","setAnswers","essayContent","setEssayContent","canEdit","setCanEdit","hasSubmitted","setHasSubmitted","isSubmitting","setIsSubmitting","DEFAULT_STUDENT_ID","studentId","setStudentId","stored","localStorage","getItem","u","JSON","parse","_id","e","console","warn","fetchAssignment","resp","get","data","success","err","error","fetchSubmission","allSubs","mySub","find","s","toString","type","ansMap","forEach","ans","questionId","selectedOption","content","checkCanEdit","now","Date","due","dueDate","loadData","handleOptionChange","optionKey","prev","handleSubmit","alert","payload","ansArr","Object","entries","map","qId","sel","post","getTimeRemaining","diff","days","Math","floor","hours","getQuizProgress","totalQuestions","questions","length","answeredQuestions","keys","getStatusBadge","_submission$grade","grade","score","bg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","div","initial","opacity","y","animate","transition","duration","animation","variant","size","x","onClick","delay","Body","Title","title","toUpperCase","md","toLocaleString","height","scale","q","idx","text","Subtitle","options","opt","i","whileHover","whileTap","Check","name","id","key","disabled","Input","checked","onChange","Label","Group","Control","as","rows","value","target","placeholder","style","resize","minHeight","Text","_c","$RefreshReg$"],"sources":["C:/Users/thang/Code_WDP301/Learning-Management-System/frontend/src/components/Student/QuizList.jsx"],"sourcesContent":["// src/components/QuizList.jsx\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FiArrowLeft, FiClock, FiCheckCircle, FiAlertTriangle, FiEdit3, FiSend } from \"react-icons/fi\";\r\nimport {\r\n  Container,\r\n  Card,\r\n  Button,\r\n  Spinner,\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Badge,\r\n  Alert,\r\n  ProgressBar,\r\n} from 'react-bootstrap';\r\n\r\nexport default function QuizList() {\r\n  const navigate = useNavigate();\r\n  const { assignmentId } = useParams(); // Route: /student/quiz/:assignmentId\r\n\r\n  // 1. State\r\n  const [assignment, setAssignment] = useState(null);\r\n  const [submission, setSubmission] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [answers, setAnswers] = useState({}); // { questionId: selectedOption }\r\n  const [essayContent, setEssayContent] = useState(\"\");\r\n  const [canEdit, setCanEdit] = useState(false); // còn hạn nộp\r\n  const [hasSubmitted, setHasSubmitted] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Lấy studentId từ localStorage hoặc mặc định\r\n  const DEFAULT_STUDENT_ID = \"60a000000000000000000002\";\r\n  const [studentId, setStudentId] = useState(DEFAULT_STUDENT_ID);\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      const stored = localStorage.getItem(\"user\");\r\n      if (stored) {\r\n        const u = JSON.parse(stored);\r\n        if (u && u._id) setStudentId(u._id);\r\n      }\r\n    } catch (e) {\r\n      console.warn(\"localStorage user parse error:\", e);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch assignment detail\r\n  const fetchAssignment = useCallback(async () => {\r\n    try {\r\n      const resp = await axios.get(`/api/student/assignments/${assignmentId}`);\r\n      if (resp.data.success) {\r\n        setAssignment(resp.data.data);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching assignment:\", err);\r\n    }\r\n  }, [assignmentId]);\r\n\r\n  // Fetch submission (if có) for this student\r\n  const fetchSubmission = useCallback(async () => {\r\n    try {\r\n      const resp = await axios.get(\r\n        `/api/student/submissions/assignment/${assignmentId}`\r\n      );\r\n      if (resp.data.success) {\r\n        // Lọc ra submission đúng studentId\r\n        const allSubs = resp.data.data;\r\n        const mySub = allSubs.find(\r\n          (s) => s.studentId.toString() === studentId\r\n        );\r\n        if (mySub) {\r\n          setSubmission(mySub);\r\n          setHasSubmitted(true);\r\n          // Nếu quiz:\r\n          if (assignment?.type === \"quiz\" && mySub.answers) {\r\n            const ansMap = {};\r\n            mySub.answers.forEach((ans) => {\r\n              ansMap[ans.questionId] = ans.selectedOption;\r\n            });\r\n            setAnswers(ansMap);\r\n          }\r\n          // Nếu essay:\r\n          if (assignment?.type === \"essay\" && mySub.content) {\r\n            setEssayContent(mySub.content);\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching submission:\", err);\r\n    }\r\n  }, [assignmentId, studentId, assignment]);\r\n\r\n  // Kiểm tra hạn nộp\r\n  const checkCanEdit = useCallback(() => {\r\n    if (!assignment) return;\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    // Nếu chưa quá hạn -> có thể nộp hoặc resubmit\r\n    setCanEdit(now <= due);\r\n  }, [assignment]);\r\n\r\n  // Kết hợp fetch và kiểm tra\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      setIsLoading(true);\r\n      await fetchAssignment();\r\n      setIsLoading(false);\r\n    }\r\n    loadData();\r\n  }, [fetchAssignment]);\r\n\r\n  useEffect(() => {\r\n    if (assignment) {\r\n      checkCanEdit();\r\n      fetchSubmission();\r\n    }\r\n  }, [assignment, fetchSubmission, checkCanEdit]);\r\n\r\n  // Handle chọn đáp án quiz\r\n  const handleOptionChange = (questionId, optionKey) => {\r\n    if (!canEdit) return;\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [questionId]: optionKey,\r\n    }));\r\n  };\r\n\r\n  // Handle submit/resubmit\r\n  const handleSubmit = async () => {\r\n    if (!assignment) return;\r\n\r\n    // Kiểm tra deadline một lần nữa\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    if (now > due) {\r\n      alert(\"Deadline has passed. Cannot submit.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    // Chuẩn bị payload\r\n    let payload = {\r\n      studentId,\r\n      assignmentId,\r\n    };\r\n    if (assignment.type === \"quiz\") {\r\n      // Chuyển answers thành mảng\r\n      const ansArr = Object.entries(answers).map(([qId, sel]) => ({\r\n        questionId: qId,\r\n        selectedOption: sel,\r\n      }));\r\n      payload.answers = ansArr;\r\n    } else {\r\n      // essay\r\n      payload.content = essayContent;\r\n    }\r\n\r\n    try {\r\n      await axios.post(\"/api/student/submissions/submit\", payload);\r\n      alert(\"Submission successful!\");\r\n      // Refresh lại submission\r\n      fetchSubmission();\r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n      alert(\"Failed to submit.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Helper functions\r\n  const getTimeRemaining = () => {\r\n    if (!assignment) return null;\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    const diff = due - now;\r\n    \r\n    if (diff <= 0) return \"Overdue\";\r\n    \r\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n    \r\n    if (days > 0) return `${days} day${days > 1 ? 's' : ''} remaining`;\r\n    if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} remaining`;\r\n    return \"Less than 1 hour remaining\";\r\n  };\r\n\r\n  const getQuizProgress = () => {\r\n    if (!assignment || assignment.type !== 'quiz') return 0;\r\n    const totalQuestions = assignment.questions.length;\r\n    const answeredQuestions = Object.keys(answers).length;\r\n    return (answeredQuestions / totalQuestions) * 100;\r\n  };\r\n\r\n  const getStatusBadge = () => {\r\n    if (hasSubmitted && submission?.grade?.score != null) {\r\n      return <Badge bg=\"success\" className=\"ms-2\"><FiCheckCircle className=\"me-1\" />Graded</Badge>;\r\n    }\r\n    if (hasSubmitted) {\r\n      return <Badge bg=\"info\" className=\"ms-2\"><FiCheckCircle className=\"me-1\" />Submitted</Badge>;\r\n    }\r\n    if (!canEdit) {\r\n      return <Badge bg=\"danger\" className=\"ms-2\"><FiAlertTriangle className=\"me-1\" />Overdue</Badge>;\r\n    }\r\n    return <Badge bg=\"warning\" className=\"ms-2\"><FiClock className=\"me-1\" />In Progress</Badge>;\r\n  };\r\n\r\n  if (isLoading || !assignment) {\r\n    return (\r\n      <Container className=\"py-5 text-center\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}\r\n        >\r\n          <Spinner animation=\"border\" variant=\"primary\" size=\"lg\" />\r\n          <p className=\"mt-3 text-muted\">Loading assignment...</p>\r\n        </motion.div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <Container className=\"py-4\">\r\n        {/* Back Button */}\r\n        <motion.div\r\n          initial={{ x: -20, opacity: 0 }}\r\n          animate={{ x: 0, opacity: 1 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <Button\r\n            variant=\"outline-primary\"\r\n            className=\"mb-4 d-flex align-items-center\"\r\n            onClick={() => navigate(-1)}\r\n          >\r\n            <FiArrowLeft className=\"me-2\" /> Back to Assignments\r\n          </Button>\r\n        </motion.div>\r\n\r\n        {/* Assignment Header */}\r\n        <motion.div\r\n          initial={{ y: -20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4, delay: 0.1 }}\r\n        >\r\n          <Card className=\"mb-4 border-0 shadow-sm\">\r\n            <Card.Body className=\"p-4\">\r\n              <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                <div>\r\n                  <Card.Title className=\"h3 mb-2 text-primary\">\r\n                    {assignment.title}\r\n                    {getStatusBadge()}\r\n                  </Card.Title>\r\n                  <Badge bg={assignment.type === 'quiz' ? 'primary' : 'secondary'} className=\"mb-2\">\r\n                    {assignment.type.toUpperCase()}\r\n                  </Badge>\r\n                </div>\r\n                {submission?.grade?.score != null && (\r\n                  <div className=\"text-end\">\r\n                    <div className=\"h2 text-success mb-0\">{submission.grade.score}%</div>\r\n                    <small className=\"text-muted\">Your Score</small>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <Row>\r\n                <Col md={6}>\r\n                  <div className=\"d-flex align-items-center text-muted mb-2\">\r\n                    <FiClock className=\"me-2\" />\r\n                    <strong>Due:</strong> {new Date(assignment.dueDate).toLocaleString()}\r\n                  </div>\r\n                </Col>\r\n                <Col md={6} className=\"text-md-end\">\r\n                  <div className={`fw-bold ${canEdit ? 'text-success' : 'text-danger'}`}>\r\n                    {getTimeRemaining()}\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n\r\n              {assignment.type === 'quiz' && (\r\n                <div className=\"mt-3\">\r\n                  <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                    <span className=\"text-muted\">Progress</span>\r\n                    <span className=\"text-muted\">{Object.keys(answers).length}/{assignment.questions.length} questions</span>\r\n                  </div>\r\n                  <ProgressBar \r\n                    now={getQuizProgress()} \r\n                    variant={getQuizProgress() === 100 ? 'success' : 'primary'}\r\n                    height={8}\r\n                  />\r\n                </div>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </motion.div>\r\n\r\n        {/* Deadline Alert */}\r\n        {!canEdit && (\r\n          <motion.div\r\n            initial={{ scale: 0.95, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3, delay: 0.2 }}\r\n          >\r\n            <Alert variant=\"danger\" className=\"mb-4\">\r\n              <FiAlertTriangle className=\"me-2\" />\r\n              <strong>Deadline has passed!</strong> You can no longer submit or modify your answers.\r\n            </Alert>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <motion.div\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.5, delay: 0.3 }}\r\n        >\r\n          {assignment.type === 'quiz' ? (\r\n            <div className=\"quiz-questions\">\r\n              {assignment.questions.map((q, idx) => (\r\n                <motion.div\r\n                  key={q.questionId}\r\n                  initial={{ y: 20, opacity: 0 }}\r\n                  animate={{ y: 0, opacity: 1 }}\r\n                  transition={{ duration: 0.4, delay: 0.1 * idx }}\r\n                >\r\n                  <Card className=\"mb-4 border-0 shadow-sm\">\r\n                    <Card.Body className=\"p-4\">\r\n                      <div className=\"d-flex align-items-start mb-3\">\r\n                        <Badge bg=\"light\" text=\"dark\" className=\"me-3 fs-6\">\r\n                          {idx + 1}\r\n                        </Badge>\r\n                        <Card.Subtitle className=\"h5 mb-0 flex-grow-1\">\r\n                          {q.text}\r\n                        </Card.Subtitle>\r\n                        {answers[q.questionId] && (\r\n                          <FiCheckCircle className=\"text-success ms-2\" />\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <Row className=\"mt-3\">\r\n                        {q.options.map((opt, i) => (\r\n                          <Col md={6} key={opt.key} className=\"mb-3\">\r\n                            <motion.div\r\n                              whileHover={canEdit ? { scale: 1.02 } : {}}\r\n                              whileTap={canEdit ? { scale: 0.98 } : {}}\r\n                            >\r\n                              <Form.Check\r\n                                type=\"radio\"\r\n                                name={`q_${q.questionId}`}\r\n                                id={`${q.questionId}_${opt.key}`}\r\n                                className=\"custom-radio\"\r\n                                disabled={!canEdit}\r\n                              >\r\n                                <Form.Check.Input\r\n                                  type=\"radio\"\r\n                                  checked={answers[q.questionId] === opt.key}\r\n                                  onChange={() => handleOptionChange(q.questionId, opt.key)}\r\n                                  disabled={!canEdit}\r\n                                />\r\n                                <Form.Check.Label className=\"d-flex align-items-center\">\r\n                                  <span className=\"fw-bold me-2\">{opt.key}.</span>\r\n                                  <span>{opt.text}</span>\r\n                                </Form.Check.Label>\r\n                              </Form.Check>\r\n                            </motion.div>\r\n                          </Col>\r\n                        ))}\r\n                      </Row>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <Card className=\"mb-4 border-0 shadow-sm\">\r\n              <Card.Body className=\"p-4\">\r\n                <Form.Group>\r\n                  <Form.Label className=\"h5 mb-3\">\r\n                    <FiEdit3 className=\"me-2\" />\r\n                    Your Answer\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    as=\"textarea\"\r\n                    rows={8}\r\n                    value={essayContent}\r\n                    onChange={(e) => setEssayContent(e.target.value)}\r\n                    disabled={!canEdit}\r\n                    placeholder={canEdit ? \"Type your answer here...\" : \"\"}\r\n                    className=\"border-0 shadow-sm\"\r\n                    style={{ resize: 'vertical', minHeight: '200px' }}\r\n                  />\r\n                  {canEdit && (\r\n                    <Form.Text className=\"text-muted\">\r\n                      {essayContent.length} characters\r\n                    </Form.Text>\r\n                  )}\r\n                </Form.Group>\r\n              </Card.Body>\r\n            </Card>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Submit Button */}\r\n        <motion.div\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4, delay: 0.5 }}\r\n          className=\"text-center mt-4\"\r\n        >\r\n          {canEdit ? (\r\n            <Button \r\n              onClick={handleSubmit}\r\n              disabled={isSubmitting}\r\n              size=\"lg\"\r\n              className=\"px-5 py-3\"\r\n              variant={hasSubmitted ? \"warning\" : \"success\"}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FiSend className=\"me-2\" />\r\n                  {hasSubmitted ? 'Resubmit Assignment' : 'Submit Assignment'}\r\n                </>\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <Alert variant=\"secondary\" className=\"d-inline-block\">\r\n              <FiAlertTriangle className=\"me-2\" />\r\n              Submission period has ended\r\n            </Alert>\r\n          )}\r\n        </motion.div>\r\n      </Container>\r\n    </motion.div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}