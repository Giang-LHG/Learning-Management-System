{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thang\\\\Code_WDP301\\\\Learning-Management-System\\\\frontend\\\\src\\\\components\\\\Student\\\\QuizList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { motion } from \"framer-motion\";\nimport { FiArrowLeft, FiClock, FiCheckCircle, FiAlertTriangle, FiEdit3, FiSend } from \"react-icons/fi\";\nimport { Container, Card, Button, Spinner, Form, Row, Col, Badge, Alert, ProgressBar } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function QuizList() {\n  _s();\n  var _submission$grade3;\n  const navigate = useNavigate();\n  const {\n    assignmentId\n  } = useParams(); // Route: /student/quiz/:assignmentId\n\n  // 1. State\n  const [assignment, setAssignment] = useState(null);\n  const [submission, setSubmission] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [answers, setAnswers] = useState({}); // { questionId: selectedOption }\n  const [essayContent, setEssayContent] = useState(\"\");\n  const [canEdit, setCanEdit] = useState(false); // còn hạn nộp\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Lấy studentId từ localStorage hoặc mặc định\n  const DEFAULT_STUDENT_ID = \"60a000000000000000000002\";\n  const [studentId, setStudentId] = useState(\"\");\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(\"user\");\n      if (stored) {\n        const u = JSON.parse(stored);\n        if (u && u._id) setStudentId(u._id);\n      } else {\n        setStudentId(DEFAULT_STUDENT_ID);\n      }\n    } catch (e) {\n      console.warn(\"localStorage user parse error:\", e);\n    }\n  }, []);\n\n  // Fetch assignment detail\n  const fetchAssignment = useCallback(async () => {\n    try {\n      const resp = await axios.get(`/api/student/assignments/${assignmentId}`);\n      if (resp.data.success) {\n        setAssignment(resp.data.data);\n      }\n    } catch (err) {\n      console.error(\"Error fetching assignment:\", err);\n    }\n  }, [assignmentId]);\n\n  // Fetch submission (if có) for this student\n  const fetchSubmission = useCallback(async () => {\n    try {\n      // FIX: Sử dụng đúng endpoint như bạn đã chỉ định\n      const resp = await axios.get(`/api/student/submissions/assignment/${assignmentId}`);\n      if (resp.data.success) {\n        // Lọc ra submission đúng studentId\n        const allSubs = resp.data.data;\n        console.log(\"➤ allSubs raw:\", allSubs);\n        allSubs.forEach((s, i) => {\n          var _s$student;\n          console.log(`– [${i}] studentId:`, s.studentId, \"type:\", typeof s.studentId);\n          console.log(`  maybe nested student._id:`, (_s$student = s.student) === null || _s$student === void 0 ? void 0 : _s$student._id);\n        });\n        const mySub = allSubs.find(s => s.studentId.toString() === studentId.toString());\n        if (mySub) {\n          setSubmission(mySub);\n          setHasSubmitted(true);\n          // Nếu quiz:\n          if ((assignment === null || assignment === void 0 ? void 0 : assignment.type) === \"quiz\" && mySub.answers) {\n            const ansMap = {};\n            mySub.answers.forEach(ans => {\n              ansMap[ans.questionId] = ans.selectedOption;\n            });\n            setAnswers(ansMap);\n          }\n          // Nếu essay:\n          if ((assignment === null || assignment === void 0 ? void 0 : assignment.type) === \"essay\" && mySub.content) {\n            setEssayContent(mySub.content);\n          }\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching submission:\", err);\n    }\n  }, [assignmentId, studentId, assignment]);\n\n  // Kiểm tra hạn nộp\n  const checkCanEdit = useCallback(() => {\n    if (!assignment) return;\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    // Nếu chưa quá hạn -> có thể nộp hoặc resubmit\n    setCanEdit(now <= due);\n  }, [assignment]);\n\n  // Kết hợp fetch và kiểm tra\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      await fetchAssignment();\n      setIsLoading(false);\n    }\n    loadData();\n  }, [fetchAssignment]);\n  useEffect(() => {\n    if (!assignment || !studentId) return;\n    checkCanEdit();\n    fetchSubmission();\n  }, [assignment, studentId, fetchSubmission, checkCanEdit]);\n\n  // Handle chọn đáp án quiz\n  const handleOptionChange = (questionId, optionKey) => {\n    if (!canEdit) return;\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: optionKey\n    }));\n  };\n\n  // Handle submit/resubmit\n  const handleSubmit = async () => {\n    if (!assignment) return;\n\n    // Kiểm tra deadline một lần nữa\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    if (now > due) {\n      alert(\"Deadline has passed. Cannot submit.\");\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      if (hasSubmitted && submission) {\n        // RESUBMIT - Update existing submission using correct endpoint\n        let resubmitPayload = {};\n        if (assignment.type === \"quiz\") {\n          // Chuyển answers thành mảng\n          const ansArr = Object.entries(answers).map(([qId, sel]) => ({\n            questionId: qId,\n            selectedOption: sel\n          }));\n          resubmitPayload.answers = ansArr;\n        } else {\n          // essay\n          resubmitPayload.content = essayContent;\n        }\n\n        // FIX: Sử dụng đúng endpoint resubmit\n        const response = await axios.put(`/api/student/submissions/resubmit/${submission._id}`, resubmitPayload);\n        if (response.data.success) {\n          alert(\"Resubmission successful!\");\n        } else {\n          alert(response.data.message || \"Resubmission failed!\");\n        }\n      } else {\n        // NEW SUBMISSION - Create new submission\n        let payload = {\n          studentId,\n          assignmentId\n        };\n        if (assignment.type === \"quiz\") {\n          // Chuyển answers thành mảng\n          const ansArr = Object.entries(answers).map(([qId, sel]) => ({\n            questionId: qId,\n            selectedOption: sel\n          }));\n          payload.answers = ansArr;\n        } else {\n          // essay\n          payload.content = essayContent;\n        }\n        const response = await axios.post(\"/api/student/submissions/submit\", payload);\n        if (response.data.success) {\n          alert(\"Submission successful!\");\n        } else {\n          alert(response.data.message || \"Submission failed!\");\n        }\n      }\n\n      // Refresh lại submission\n      await fetchSubmission();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Submit error:\", err);\n      const errorMsg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to submit.\";\n      alert(errorMsg);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Helper functions\n  const getTimeRemaining = () => {\n    if (!assignment) return null;\n    const now = new Date();\n    const due = new Date(assignment.dueDate);\n    const diff = due - now;\n    if (diff <= 0) return \"Overdue\";\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    const hours = Math.floor(diff % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));\n    if (days > 0) return `${days} day${days > 1 ? 's' : ''} remaining`;\n    if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} remaining`;\n    return \"Less than 1 hour remaining\";\n  };\n  const getQuizProgress = () => {\n    if (!assignment || assignment.type !== 'quiz') return 0;\n    const totalQuestions = assignment.questions.length;\n    const answeredQuestions = Object.keys(answers).length;\n    return answeredQuestions / totalQuestions * 100;\n  };\n  const getStatusBadge = () => {\n    var _submission$grade;\n    if (hasSubmitted && (submission === null || submission === void 0 ? void 0 : (_submission$grade = submission.grade) === null || _submission$grade === void 0 ? void 0 : _submission$grade.score) != null) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"success\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiCheckCircle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 51\n        }, this), \"Graded\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 14\n      }, this);\n    }\n    if (hasSubmitted) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"info\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiCheckCircle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 48\n        }, this), \"Submitted\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 14\n      }, this);\n    }\n    if (!canEdit) {\n      return /*#__PURE__*/_jsxDEV(Badge, {\n        bg: \"danger\",\n        className: \"ms-2\",\n        children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 50\n        }, this), \"Overdue\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Badge, {\n      bg: \"warning\",\n      className: \"ms-2\",\n      children: [/*#__PURE__*/_jsxDEV(FiClock, {\n        className: \"me-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 49\n      }, this), \"In Progress\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 12\n    }, this);\n  };\n\n  // Show last submission info\n  const getSubmissionInfo = () => {\n    var _submission$grade2;\n    if (!hasSubmitted || !submission) return null;\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"info\",\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Last submitted:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), \" \", new Date(submission.submittedAt).toLocaleString(), ((_submission$grade2 = submission.grade) === null || _submission$grade2 === void 0 ? void 0 : _submission$grade2.score) != null && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Grade:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-success\",\n              children: [submission.grade.score, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), canEdit && /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: \"You can still resubmit before the deadline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this);\n  };\n  if (isLoading || !assignment) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.5\n        },\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"primary\",\n          size: \"lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-muted\",\n          children: \"Loading assignment...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          x: -20,\n          opacity: 0\n        },\n        animate: {\n          x: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-primary\",\n          className: \"mb-4 d-flex align-items-center\",\n          onClick: () => navigate(-1),\n          children: [/*#__PURE__*/_jsxDEV(FiArrowLeft, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), \" Back to Assignments\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: -20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.4,\n          delay: 0.1\n        },\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-start mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                  className: \"h3 mb-2 text-primary\",\n                  children: [assignment.title, getStatusBadge()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  bg: assignment.type === 'quiz' ? 'primary' : 'secondary',\n                  className: \"mb-2\",\n                  children: assignment.type.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), (submission === null || submission === void 0 ? void 0 : (_submission$grade3 = submission.grade) === null || _submission$grade3 === void 0 ? void 0 : _submission$grade3.score) != null && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h2 text-success mb-0\",\n                  children: [submission.grade.score, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: \"Your Score\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center text-muted mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(FiClock, {\n                    className: \"me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Due:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 21\n                  }, this), \" \", new Date(assignment.dueDate).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                className: \"text-md-end\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `fw-bold ${canEdit ? 'text-success' : 'text-danger'}`,\n                  children: getTimeRemaining()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), assignment.type === 'quiz' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-center mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted\",\n                  children: \"Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted\",\n                  children: [Object.keys(answers).length, \"/\", assignment.questions.length, \" questions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n                now: getQuizProgress(),\n                variant: getQuizProgress() === 100 ? 'success' : 'primary',\n                height: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), getSubmissionInfo(), !canEdit && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          scale: 0.95,\n          opacity: 0\n        },\n        animate: {\n          scale: 1,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.3,\n          delay: 0.2\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Deadline has passed!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), \" You can no longer submit or modify your answers.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.5,\n          delay: 0.3\n        },\n        children: assignment.type === 'quiz' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quiz-questions\",\n          children: assignment.questions.map((q, idx) => /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              y: 20,\n              opacity: 0\n            },\n            animate: {\n              y: 0,\n              opacity: 1\n            },\n            transition: {\n              duration: 0.4,\n              delay: 0.1 * idx\n            },\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"mb-4 border-0 shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-start mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"light\",\n                    text: \"dark\",\n                    className: \"me-3 fs-6\",\n                    children: idx + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n                    className: \"h5 mb-0 flex-grow-1\",\n                    children: q.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 25\n                  }, this), answers[q.questionId] && /*#__PURE__*/_jsxDEV(FiCheckCircle, {\n                    className: \"text-success ms-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"mt-3\",\n                  children: q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(Col, {\n                    md: 6,\n                    className: \"mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(motion.div, {\n                      whileHover: canEdit ? {\n                        scale: 1.02\n                      } : {},\n                      whileTap: canEdit ? {\n                        scale: 0.98\n                      } : {},\n                      children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                        type: \"radio\",\n                        name: `q_${q.questionId}`,\n                        id: `${q.questionId}_${opt.key}`,\n                        className: \"custom-radio\",\n                        disabled: !canEdit,\n                        children: [/*#__PURE__*/_jsxDEV(Form.Check.Input, {\n                          type: \"radio\",\n                          checked: answers[q.questionId] === opt.key,\n                          onChange: () => handleOptionChange(q.questionId, opt.key),\n                          disabled: !canEdit\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 434,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Form.Check.Label, {\n                          className: \"d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"fw-bold me-2\",\n                            children: [opt.key, \".\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 441,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: opt.text\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 442,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 440,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 427,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 423,\n                      columnNumber: 29\n                    }, this)\n                  }, opt.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this)\n          }, q.questionId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                className: \"h5 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(FiEdit3, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 21\n                }, this), \"Your Answer\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"textarea\",\n                rows: 8,\n                value: essayContent,\n                onChange: e => setEssayContent(e.target.value),\n                disabled: !canEdit,\n                placeholder: canEdit ? \"Type your answer here...\" : \"\",\n                className: \"border-0 shadow-sm\",\n                style: {\n                  resize: 'vertical',\n                  minHeight: '200px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, this), canEdit && /*#__PURE__*/_jsxDEV(Form.Text, {\n                className: \"text-muted\",\n                children: [essayContent.length, \" characters\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          duration: 0.4,\n          delay: 0.5\n        },\n        className: \"text-center mt-4\",\n        children: canEdit ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmit,\n          disabled: isSubmitting,\n          size: \"lg\",\n          className: \"px-5 py-3\",\n          variant: hasSubmitted ? \"warning\" : \"success\",\n          children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              size: \"sm\",\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 19\n            }, this), hasSubmitted ? 'Resubmitting...' : 'Submitting...']\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(FiSend, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 19\n            }, this), hasSubmitted ? 'Resubmit Assignment' : 'Submit Assignment']\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"secondary\",\n          className: \"d-inline-block\",\n          children: [/*#__PURE__*/_jsxDEV(FiAlertTriangle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this), \"Submission period has ended\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 5\n  }, this);\n}\n_s(QuizList, \"/tlYbe5TaN9bzqmOLbH012+XBOY=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = QuizList;\nvar _c;\n$RefreshReg$(_c, \"QuizList\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","axios","motion","FiArrowLeft","FiClock","FiCheckCircle","FiAlertTriangle","FiEdit3","FiSend","Container","Card","Button","Spinner","Form","Row","Col","Badge","Alert","ProgressBar","jsxDEV","_jsxDEV","Fragment","_Fragment","QuizList","_s","_submission$grade3","navigate","assignmentId","assignment","setAssignment","submission","setSubmission","isLoading","setIsLoading","answers","setAnswers","essayContent","setEssayContent","canEdit","setCanEdit","hasSubmitted","setHasSubmitted","isSubmitting","setIsSubmitting","DEFAULT_STUDENT_ID","studentId","setStudentId","stored","localStorage","getItem","u","JSON","parse","_id","e","console","warn","fetchAssignment","resp","get","data","success","err","error","fetchSubmission","allSubs","log","forEach","s","i","_s$student","student","mySub","find","toString","type","ansMap","ans","questionId","selectedOption","content","checkCanEdit","now","Date","due","dueDate","loadData","handleOptionChange","optionKey","prev","handleSubmit","alert","resubmitPayload","ansArr","Object","entries","map","qId","sel","response","put","message","payload","post","_err$response","_err$response$data","errorMsg","getTimeRemaining","diff","days","Math","floor","hours","getQuizProgress","totalQuestions","questions","length","answeredQuestions","keys","getStatusBadge","_submission$grade","grade","score","bg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getSubmissionInfo","_submission$grade2","variant","submittedAt","toLocaleString","div","initial","opacity","y","animate","transition","duration","animation","size","x","onClick","delay","Body","Title","title","toUpperCase","md","height","scale","q","idx","text","Subtitle","options","opt","whileHover","whileTap","Check","name","id","key","disabled","Input","checked","onChange","Label","Group","Control","as","rows","value","target","placeholder","style","resize","minHeight","Text","_c","$RefreshReg$"],"sources":["C:/Users/thang/Code_WDP301/Learning-Management-System/frontend/src/components/Student/QuizList.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FiArrowLeft, FiClock, FiCheckCircle, FiAlertTriangle, FiEdit3, FiSend } from \"react-icons/fi\";\r\nimport {\r\n  Container,\r\n  Card,\r\n  Button,\r\n  Spinner,\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Badge,\r\n  Alert,\r\n  ProgressBar,\r\n} from 'react-bootstrap';\r\n\r\nexport default function QuizList() {\r\n  const navigate = useNavigate();\r\n  const { assignmentId } = useParams(); // Route: /student/quiz/:assignmentId\r\n\r\n  // 1. State\r\n  const [assignment, setAssignment] = useState(null);\r\n  const [submission, setSubmission] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [answers, setAnswers] = useState({}); // { questionId: selectedOption }\r\n  const [essayContent, setEssayContent] = useState(\"\");\r\n  const [canEdit, setCanEdit] = useState(false); // còn hạn nộp\r\n  const [hasSubmitted, setHasSubmitted] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Lấy studentId từ localStorage hoặc mặc định\r\n  const DEFAULT_STUDENT_ID = \"60a000000000000000000002\";\r\n  const [studentId, setStudentId] = useState(\"\");\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      const stored = localStorage.getItem(\"user\");\r\n      if (stored) {\r\n        const u = JSON.parse(stored);\r\n        if (u && u._id) setStudentId(u._id);\r\n      }else{\r\n        setStudentId(DEFAULT_STUDENT_ID);\r\n      }\r\n    } catch (e) {\r\n      console.warn(\"localStorage user parse error:\", e);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch assignment detail\r\n  const fetchAssignment = useCallback(async () => {\r\n    try {\r\n      const resp = await axios.get(`/api/student/assignments/${assignmentId}`);\r\n      if (resp.data.success) {\r\n        setAssignment(resp.data.data);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching assignment:\", err);\r\n    }\r\n  }, [assignmentId]);\r\n\r\n  // Fetch submission (if có) for this student\r\n  const fetchSubmission = useCallback(async () => {\r\n    try {\r\n      // FIX: Sử dụng đúng endpoint như bạn đã chỉ định\r\n      const resp = await axios.get(\r\n        `/api/student/submissions/assignment/${assignmentId}`\r\n      );\r\n      if (resp.data.success) {\r\n        // Lọc ra submission đúng studentId\r\n        const allSubs = resp.data.data;\r\n        console.log(\"➤ allSubs raw:\", allSubs);\r\nallSubs.forEach((s, i) => {\r\n  console.log(`– [${i}] studentId:`, s.studentId, \"type:\", typeof s.studentId);\r\n  console.log(`  maybe nested student._id:`, s.student?._id);\r\n});\r\n        const mySub = allSubs.find(\r\n          (s) => s.studentId.toString() === studentId.toString()\r\n        );\r\n        if (mySub) {\r\n          setSubmission(mySub);\r\n          setHasSubmitted(true);\r\n          // Nếu quiz:\r\n          if (assignment?.type === \"quiz\" && mySub.answers) {\r\n            const ansMap = {};\r\n            mySub.answers.forEach((ans) => {\r\n              ansMap[ans.questionId] = ans.selectedOption;\r\n            });\r\n            setAnswers(ansMap);\r\n          }\r\n          // Nếu essay:\r\n          if (assignment?.type === \"essay\" && mySub.content) {\r\n            setEssayContent(mySub.content);\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching submission:\", err);\r\n    }\r\n  }, [assignmentId, studentId, assignment]);\r\n\r\n  // Kiểm tra hạn nộp\r\n  const checkCanEdit = useCallback(() => {\r\n    if (!assignment) return;\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    // Nếu chưa quá hạn -> có thể nộp hoặc resubmit\r\n    setCanEdit(now <= due);\r\n  }, [assignment]);\r\n\r\n  // Kết hợp fetch và kiểm tra\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      setIsLoading(true);\r\n      await fetchAssignment();\r\n      setIsLoading(false);\r\n    }\r\n    loadData();\r\n  }, [fetchAssignment]);\r\n\r\n  useEffect(() => {\r\n  if (!assignment || !studentId) return;\r\n  checkCanEdit();\r\n  fetchSubmission();\r\n}, [assignment, studentId, fetchSubmission, checkCanEdit]);\r\n\r\n  // Handle chọn đáp án quiz\r\n  const handleOptionChange = (questionId, optionKey) => {\r\n    if (!canEdit) return;\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [questionId]: optionKey,\r\n    }));\r\n  };\r\n\r\n  // Handle submit/resubmit\r\n  const handleSubmit = async () => {\r\n    if (!assignment) return;\r\n\r\n    // Kiểm tra deadline một lần nữa\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    if (now > due) {\r\n      alert(\"Deadline has passed. Cannot submit.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      if (hasSubmitted && submission) {\r\n        // RESUBMIT - Update existing submission using correct endpoint\r\n        let resubmitPayload = {};\r\n        \r\n        if (assignment.type === \"quiz\") {\r\n          // Chuyển answers thành mảng\r\n          const ansArr = Object.entries(answers).map(([qId, sel]) => ({\r\n            questionId: qId,\r\n            selectedOption: sel,\r\n          }));\r\n          resubmitPayload.answers = ansArr;\r\n        } else {\r\n          // essay\r\n          resubmitPayload.content = essayContent;\r\n        }\r\n\r\n        // FIX: Sử dụng đúng endpoint resubmit\r\n        const response = await axios.put(\r\n          `/api/student/submissions/resubmit/${submission._id}`, \r\n          resubmitPayload\r\n        );\r\n        \r\n        if (response.data.success) {\r\n          alert(\"Resubmission successful!\");\r\n        } else {\r\n          alert(response.data.message || \"Resubmission failed!\");\r\n        }\r\n        \r\n      } else {\r\n        // NEW SUBMISSION - Create new submission\r\n        let payload = {\r\n          studentId,\r\n          assignmentId,\r\n        };\r\n        \r\n        if (assignment.type === \"quiz\") {\r\n          // Chuyển answers thành mảng\r\n          const ansArr = Object.entries(answers).map(([qId, sel]) => ({\r\n            questionId: qId,\r\n            selectedOption: sel,\r\n          }));\r\n          payload.answers = ansArr;\r\n        } else {\r\n          // essay\r\n          payload.content = essayContent;\r\n        }\r\n\r\n        const response = await axios.post(\"/api/student/submissions/submit\", payload);\r\n        \r\n        if (response.data.success) {\r\n          alert(\"Submission successful!\");\r\n        } else {\r\n          alert(response.data.message || \"Submission failed!\");\r\n        }\r\n      }\r\n      \r\n      // Refresh lại submission\r\n      await fetchSubmission();\r\n      \r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n      const errorMsg = err.response?.data?.message || \"Failed to submit.\";\r\n      alert(errorMsg);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Helper functions\r\n  const getTimeRemaining = () => {\r\n    if (!assignment) return null;\r\n    const now = new Date();\r\n    const due = new Date(assignment.dueDate);\r\n    const diff = due - now;\r\n    \r\n    if (diff <= 0) return \"Overdue\";\r\n    \r\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n    \r\n    if (days > 0) return `${days} day${days > 1 ? 's' : ''} remaining`;\r\n    if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} remaining`;\r\n    return \"Less than 1 hour remaining\";\r\n  };\r\n\r\n  const getQuizProgress = () => {\r\n    if (!assignment || assignment.type !== 'quiz') return 0;\r\n    const totalQuestions = assignment.questions.length;\r\n    const answeredQuestions = Object.keys(answers).length;\r\n    return (answeredQuestions / totalQuestions) * 100;\r\n  };\r\n\r\n  const getStatusBadge = () => {\r\n    if (hasSubmitted && submission?.grade?.score != null) {\r\n      return <Badge bg=\"success\" className=\"ms-2\"><FiCheckCircle className=\"me-1\" />Graded</Badge>;\r\n    }\r\n    if (hasSubmitted) {\r\n      return <Badge bg=\"info\" className=\"ms-2\"><FiCheckCircle className=\"me-1\" />Submitted</Badge>;\r\n    }\r\n    if (!canEdit) {\r\n      return <Badge bg=\"danger\" className=\"ms-2\"><FiAlertTriangle className=\"me-1\" />Overdue</Badge>;\r\n    }\r\n    return <Badge bg=\"warning\" className=\"ms-2\"><FiClock className=\"me-1\" />In Progress</Badge>;\r\n  };\r\n\r\n  // Show last submission info\r\n  const getSubmissionInfo = () => {\r\n    if (!hasSubmitted || !submission) return null;\r\n    \r\n    return (\r\n      <Alert variant=\"info\" className=\"mb-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <div>\r\n            <strong>Last submitted:</strong> {new Date(submission.submittedAt).toLocaleString()}\r\n            {submission.grade?.score != null && (\r\n              <span className=\"ms-3\">\r\n                <strong>Grade:</strong> <span className=\"text-success\">{submission.grade.score}%</span>\r\n              </span>\r\n            )}\r\n          </div>\r\n          {canEdit && (\r\n            <small className=\"text-muted\">You can still resubmit before the deadline</small>\r\n          )}\r\n        </div>\r\n      </Alert>\r\n    );\r\n  };\r\n\r\n  if (isLoading || !assignment) {\r\n    return (\r\n      <Container className=\"py-5 text-center\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}\r\n        >\r\n          <Spinner animation=\"border\" variant=\"primary\" size=\"lg\" />\r\n          <p className=\"mt-3 text-muted\">Loading assignment...</p>\r\n        </motion.div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <Container className=\"py-4\">\r\n        {/* Back Button */}\r\n        <motion.div\r\n          initial={{ x: -20, opacity: 0 }}\r\n          animate={{ x: 0, opacity: 1 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <Button\r\n            variant=\"outline-primary\"\r\n            className=\"mb-4 d-flex align-items-center\"\r\n            onClick={() => navigate(-1)}\r\n          >\r\n            <FiArrowLeft className=\"me-2\" /> Back to Assignments\r\n          </Button>\r\n        </motion.div>\r\n\r\n        {/* Assignment Header */}\r\n        <motion.div\r\n          initial={{ y: -20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4, delay: 0.1 }}\r\n        >\r\n          <Card className=\"mb-4 border-0 shadow-sm\">\r\n            <Card.Body className=\"p-4\">\r\n              <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                <div>\r\n                  <Card.Title className=\"h3 mb-2 text-primary\">\r\n                    {assignment.title}\r\n                    {getStatusBadge()}\r\n                  </Card.Title>\r\n                  <Badge bg={assignment.type === 'quiz' ? 'primary' : 'secondary'} className=\"mb-2\">\r\n                    {assignment.type.toUpperCase()}\r\n                  </Badge>\r\n                </div>\r\n                {submission?.grade?.score != null && (\r\n                  <div className=\"text-end\">\r\n                    <div className=\"h2 text-success mb-0\">{submission.grade.score}%</div>\r\n                    <small className=\"text-muted\">Your Score</small>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <Row>\r\n                <Col md={6}>\r\n                  <div className=\"d-flex align-items-center text-muted mb-2\">\r\n                    <FiClock className=\"me-2\" />\r\n                    <strong>Due:</strong> {new Date(assignment.dueDate).toLocaleString()}\r\n                  </div>\r\n                </Col>\r\n                <Col md={6} className=\"text-md-end\">\r\n                  <div className={`fw-bold ${canEdit ? 'text-success' : 'text-danger'}`}>\r\n                    {getTimeRemaining()}\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n\r\n              {assignment.type === 'quiz' && (\r\n                <div className=\"mt-3\">\r\n                  <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                    <span className=\"text-muted\">Progress</span>\r\n                    <span className=\"text-muted\">{Object.keys(answers).length}/{assignment.questions.length} questions</span>\r\n                  </div>\r\n                  <ProgressBar \r\n                    now={getQuizProgress()} \r\n                    variant={getQuizProgress() === 100 ? 'success' : 'primary'}\r\n                    height={8}\r\n                  />\r\n                </div>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </motion.div>\r\n\r\n        {/* Submission Info */}\r\n        {getSubmissionInfo()}\r\n\r\n        {/* Deadline Alert */}\r\n        {!canEdit && (\r\n          <motion.div\r\n            initial={{ scale: 0.95, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3, delay: 0.2 }}\r\n          >\r\n            <Alert variant=\"danger\" className=\"mb-4\">\r\n              <FiAlertTriangle className=\"me-2\" />\r\n              <strong>Deadline has passed!</strong> You can no longer submit or modify your answers.\r\n            </Alert>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <motion.div\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.5, delay: 0.3 }}\r\n        >\r\n          {assignment.type === 'quiz' ? (\r\n            <div className=\"quiz-questions\">\r\n              {assignment.questions.map((q, idx) => (\r\n                <motion.div\r\n                  key={q.questionId}\r\n                  initial={{ y: 20, opacity: 0 }}\r\n                  animate={{ y: 0, opacity: 1 }}\r\n                  transition={{ duration: 0.4, delay: 0.1 * idx }}\r\n                >\r\n                  <Card className=\"mb-4 border-0 shadow-sm\">\r\n                    <Card.Body className=\"p-4\">\r\n                      <div className=\"d-flex align-items-start mb-3\">\r\n                        <Badge bg=\"light\" text=\"dark\" className=\"me-3 fs-6\">\r\n                          {idx + 1}\r\n                        </Badge>\r\n                        <Card.Subtitle className=\"h5 mb-0 flex-grow-1\">\r\n                          {q.text}\r\n                        </Card.Subtitle>\r\n                        {answers[q.questionId] && (\r\n                          <FiCheckCircle className=\"text-success ms-2\" />\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <Row className=\"mt-3\">\r\n                        {q.options.map((opt, i) => (\r\n                          <Col md={6} key={opt.key} className=\"mb-3\">\r\n                            <motion.div\r\n                              whileHover={canEdit ? { scale: 1.02 } : {}}\r\n                              whileTap={canEdit ? { scale: 0.98 } : {}}\r\n                            >\r\n                              <Form.Check\r\n                                type=\"radio\"\r\n                                name={`q_${q.questionId}`}\r\n                                id={`${q.questionId}_${opt.key}`}\r\n                                className=\"custom-radio\"\r\n                                disabled={!canEdit}\r\n                              >\r\n                                <Form.Check.Input\r\n                                  type=\"radio\"\r\n                                  checked={answers[q.questionId] === opt.key}\r\n                                  onChange={() => handleOptionChange(q.questionId, opt.key)}\r\n                                  disabled={!canEdit}\r\n                                />\r\n                                <Form.Check.Label className=\"d-flex align-items-center\">\r\n                                  <span className=\"fw-bold me-2\">{opt.key}.</span>\r\n                                  <span>{opt.text}</span>\r\n                                </Form.Check.Label>\r\n                              </Form.Check>\r\n                            </motion.div>\r\n                          </Col>\r\n                        ))}\r\n                      </Row>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <Card className=\"mb-4 border-0 shadow-sm\">\r\n              <Card.Body className=\"p-4\">\r\n                <Form.Group>\r\n                  <Form.Label className=\"h5 mb-3\">\r\n                    <FiEdit3 className=\"me-2\" />\r\n                    Your Answer\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    as=\"textarea\"\r\n                    rows={8}\r\n                    value={essayContent}\r\n                    onChange={(e) => setEssayContent(e.target.value)}\r\n                    disabled={!canEdit}\r\n                    placeholder={canEdit ? \"Type your answer here...\" : \"\"}\r\n                    className=\"border-0 shadow-sm\"\r\n                    style={{ resize: 'vertical', minHeight: '200px' }}\r\n                  />\r\n                  {canEdit && (\r\n                    <Form.Text className=\"text-muted\">\r\n                      {essayContent.length} characters\r\n                    </Form.Text>\r\n                  )}\r\n                </Form.Group>\r\n              </Card.Body>\r\n            </Card>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Submit Button */}\r\n        <motion.div\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4, delay: 0.5 }}\r\n          className=\"text-center mt-4\"\r\n        >\r\n          {canEdit ? (\r\n            <Button \r\n              onClick={handleSubmit}\r\n              disabled={isSubmitting}\r\n              size=\"lg\"\r\n              className=\"px-5 py-3\"\r\n              variant={hasSubmitted ? \"warning\" : \"success\"}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                  {hasSubmitted ? 'Resubmitting...' : 'Submitting...'}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FiSend className=\"me-2\" />\r\n                  {hasSubmitted ? 'Resubmit Assignment' : 'Submit Assignment'}\r\n                </>\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <Alert variant=\"secondary\" className=\"d-inline-block\">\r\n              <FiAlertTriangle className=\"me-2\" />\r\n              Submission period has ended\r\n            </Alert>\r\n          )}\r\n        </motion.div>\r\n      </Container>\r\n    </motion.div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}